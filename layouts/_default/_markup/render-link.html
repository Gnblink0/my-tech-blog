{{- $url := .Destination | safeURL -}}
{{- $isFragment := hasPrefix $url "#" -}}
<a href="{{ $url }}"
  {{- with .Title }} title="{{ . }}"{{ end -}}
  {{- if and (not $isFragment) (findRE "^(https?:)?//" (lower .Destination)) }}
    class="external-link"
    target="_blank"
    rel="noopener"
  {{- else if $isFragment }}
    class="internal-link"
    onclick="saveScrollPosition(event)"
  {{- end -}}
>{{ .Text | safeHTML }}</a>